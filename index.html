<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>OnlyFans · dakota</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#04040a; --panel:#071018; --neon-cyan:#00f6d9; --neon-red:#ff4b4b; --muted:#8fffcf;
  }
  html,body{height:100%;margin:0;background:
    linear-gradient(180deg,#000 0%, #02030a 70%); color:var(--muted); font-family:"Press Start 2P", monospace; -webkit-font-smoothing:antialiased;}
  .wrap{max-width:520px;margin:12px auto;padding:12px;box-sizing:border-box;}
  .panel{
    background:linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.35));
    border:4px solid rgba(0,246,217,0.08);
    border-radius:12px; padding:14px; box-shadow:0 10px 40px rgba(0,0,0,0.7);
    position:relative; overflow:hidden; image-rendering: pixelated;
  }
  /* pixel grid */
  .panel:before{
    content:""; position:absolute; inset:0;
    background-image:linear-gradient(rgba(0,0,0,0.06) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.03) 1px, transparent 1px);
    background-size:6px 6px, 6px 6px; pointer-events:none; mix-blend-mode:overlay;
  }
  h1{font-size:14px;color:var(--neon-cyan);margin:0 0 8px;letter-spacing:1px}
  p.lead{margin:0 0 8px;font-size:11px;color:var(--muted)}
  .screen{background:#001218;border:3px solid rgba(0,246,217,0.06);padding:12px;border-radius:8px; min-height:140px;}
  .toprow{display:flex;justify-content:space-between;align-items:center}
  .label{font-size:9px;color:#6fffd6}
  .bigcounter{font-size:44px;color:var(--neon-red);font-weight:700;text-shadow:0 2px 0 rgba(0,0,0,0.6)}
  .btn{
    display:block;width:100%;padding:12px;border-radius:8px;border:3px solid var(--neon-cyan);
    background:transparent;color:var(--neon-cyan);font-weight:700;font-size:12px;margin-top:12px;cursor:pointer;
    box-shadow: 0 8px 0 rgba(0,0,0,0.45); text-transform:none;
  }
  .msg{font-size:11px;margin-top:12px;color:var(--muted)}
  .final{display:none;font-size:13px;color:var(--neon-cyan);margin-top:12px;line-height:1.4}

  /* modal interno 'pestaña' */
  .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.9));backdrop-filter:blur(2px);z-index:50}
  .modal{
    width:92%;max-width:440px;background:#071018;border:4px solid rgba(0,246,217,0.12);padding:12px;border-radius:10px;
    box-shadow:0 12px 48px rgba(0,0,0,0.9); color:var(--muted); font-family:monospace;
  }
  .modal h2{color:var(--neon-red);font-size:12px;margin:0 0 8px}
  .modal .line{font-size:12px;margin:6px 0}
  .modal .count{font-size:34px;color:var(--neon-cyan);font-weight:700}
  .modal .controls{display:flex;gap:8px;margin-top:10px}
  .smallbtn{flex:1;padding:10px;border-radius:6px;border:3px solid rgba(255,255,255,0.03);background:#000;color:var(--muted);cursor:pointer;font-size:11px}
  .closebtn{background:transparent;border:3px solid rgba(0,246,217,0.18);color:var(--neon-cyan)}

  /* second mini-modal */
  .mini{display:none; width:86%; max-width:360px;background:#08141a;border:3px solid rgba(255,75,75,0.12);padding:12px;border-radius:8px;color:var(--muted); text-align:center}

  /* video overlay */
  .videoOverlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:#000000cc;z-index:70;padding:20px}
  .videoBox{width:100%;max-width:900px;height:56.25vw;max-height:560px;background:#000;border:6px solid rgba(0,246,217,0.12);border-radius:8px}
  @media (max-width:480px){
    .bigcounter{font-size:36px}
    .modal .count{font-size:28px}
    .videoBox{height:50vh}
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="panel" role="main">
      <h1>onlyfans.com/dakota</h1>
      <p class="lead">¿Creíste? Curiosito... haz lo que quieras, es una broma.</p>

      <div class="screen" role="region" aria-live="polite">
        <div class="toprow" style="align-items:center">
          <div>
            <div class="label">ESTADO</div>
            <div id="status" class="msg">Iniciando sistema...</div>
          </div>
          <div style="text-align:right">
            <div class="label">CUENTA</div>
            <div id="mainCounter" class="bigcounter">3</div>
          </div>
        </div>

        <button id="cancelBtn" class="btn" aria-haspopup="dialog">⚠️ Rápido, cancélalo o te hackearán</button>

        <div id="below" class="msg">Pulsa el botón si quieres intentar cancelar. (Solo una broma)</div>
        <div id="finalMsg" class="final" aria-live="polite"></div>
      </div>
    </div>
  </div>

  <!-- Modal principal (pestaña emergente) -->
  <div id="overlay" class="overlay" role="dialog" aria-modal="true">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <h2 id="modalTitle">OPPPS — eso no se puede</h2>
      <div class="line">Iniciando jackiando en...</div>
      <div class="line count"><span id="modalCount" class="count">3</span></div>
      <div class="line" id="modalHint">Preparando descarga...</div>

      <div class="controls">
        <!-- UN SOLO BOTÓN de cerrar -->
        <button id="modalClose" class="smallbtn closebtn">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- Mini modal que aparece al cerrar la anterior -->
  <div id="miniWrap" style="position:fixed;bottom:18px;right:18px;display:none;z-index:60;">
    <div id="mini" class="mini">
      <div style="font-size:12px">¿Cerrar?</div>
      <div style="margin-top:8px;font-size:11px;color:var(--neon-cyan)">Bueno, ya fuiste hackeado — haz lo que quieras :)</div>
      <div style="margin-top:10px"><button id="miniClose" class="smallbtn" style="border:3px solid rgba(0,246,217,0.12)">Cerrar</button></div>
    </div>
  </div>

  <!-- Video overlay final -->
  <div id="videoOverlay" class="videoOverlay" role="dialog" aria-modal="true">
    <div class="videoBox" id="videoBox">
      <!-- iframe inserted dynamically -->
    </div>
  </div>

<script>
  // ---------- RUTA LOCAL DEL ARCHIVO (prueba aquí en el entorno)
  // Esta es la ruta del archivo que existe en el entorno donde estamos probando.
  // Cuando subas a GitHub Pages cambia esta línea a: const PRANK_FILE = 'virus_por_curiosito.jpg';
  const PRANK_FILE = '/mnt/data/3da815d0-aa20-4b60-9664-21b1fad483fd.png';
  const DOWNLOAD_NAME = 'virus_por_curiosito.jpg';

  // ---------- ELEMENTOS
  const mainCounterEl = document.getElementById('mainCounter');
  const statusEl = document.getElementById('status');
  const cancelBtn = document.getElementById('cancelBtn');
  const overlay = document.getElementById('overlay');
  const modalCountEl = document.getElementById('modalCount');
  const modalHint = document.getElementById('modalHint');
  const modalClose = document.getElementById('modalClose');
  const miniWrap = document.getElementById('miniWrap');
  const miniClose = document.getElementById('miniClose');
  const finalMsgEl = document.getElementById('finalMsg');
  const videoOverlay = document.getElementById('videoOverlay');
  const videoBox = document.getElementById('videoBox');

  // ---------- LÓGICA: contador principal (3s). Si llega a 0 sin interacción, se descarga automáticamente.
  let mainTime = 3;
  let mainInteracted = false;
  const mainInterval = setInterval(()=> {
    mainCounterEl.textContent = mainTime;
    if(mainTime === 2) statusEl.textContent = 'Escaneando curiosidades...';
    if(mainTime === 1) statusEl.textContent = 'Analizando comportamiento...';
    if(mainTime <= 0){
      clearInterval(mainInterval);
      mainCounterEl.textContent = '0';
      if(!mainInteracted){
        // No hicieron click → descarga automática
        triggerDownload();
        // Mostrar mini mensaje final y desactivar botón
        finalizeAfterDownload();
      }
    }
    mainTime--;
  }, 1000);

  // ---------- Si el usuario hace click en el botón: abrimos modal y lanzamos el modal-countdown.
  cancelBtn.addEventListener('click', ()=>{
    mainInteracted = true;
    overlay.style.display = 'flex';
    modalCountEl.textContent = '3';
    modalHint.textContent = 'Preparando descarga...';

    // iniciar cuenta regresiva del modal (3..2..1) -> descarga
    let t = 3;
    const modalInterval = setInterval(()=>{
      modalCountEl.textContent = t;
      if(t === 2) modalHint.textContent = 'Jackiando capa segura...';
      if(t === 1) modalHint.textContent = 'Inyectando paquete (modo broma)...';
      if(t <= 0){
        clearInterval(modalInterval);
        modalHint.textContent = 'Descargando archivo...';
        // Disparar descarga
        triggerDownload();
        // Después de la descarga mostramos texto en modal y permitimos cerrar
        setTimeout(()=> modalHint.textContent = 'Archivo descargado. Pulsa Cerrar.', 800);
      }
      t--;
    },1000);
  });

  // ---------- función de descarga (inofensiva)
  function triggerDownload(){
    try{
      const a = document.createElement('a');
      a.href = PRANK_FILE;
      a.download = DOWNLOAD_NAME;
      document.body.appendChild(a);
      a.click();
      a.remove();
    }catch(e){
      // si algo falla, mostrar aviso
      console.warn('Descarga fallida:', e);
      alert('No se pudo descargar automáticamente en este navegador. Puedes descargar manualmente.');
    }
  }

  // ---------- Al cerrar el modal principal: mostramos la mini-pestaña con el mensaje "¿Cerrar?..."
  modalClose.addEventListener('click', ()=>{
    overlay.style.display = 'none';
    // Mostrar mini-modal tipo pestaña
    miniWrap.style.display = 'block';
    // Opcional: ocultar el botón principal y el contador
    cancelBtn.style.display = 'none';
    mainCounterEl.style.display = 'none';
  });

  // ---------- Al cerrar la mini-pestaña: mostrar mensaje final y reproducir el video pedido
  miniClose.addEventListener('click', ()=>{
    miniWrap.style.display = 'none';
    finalMsgEl.style.display = 'block';
    finalMsgEl.innerHTML = '¿Cerrar? Bueno, ya fuiste hackeado — <strong>haz lo que quieras :)</strong>';
    // Reproducir video final (YouTube). Se inserta un iframe con autoplay (silenciado para mejorar compatibilidad).
    // Video solicitado: https://www.youtube.com/watch?v=jNOJD2gNN_s
    showFinalVideo('jNOJD2gNN_s');
  });

  // ---------- Al finalizar por descarga automática (sin interacción) también mostrar final estado
  function finalizeAfterDownload(){
    // ocultar elementos de interacción
    cancelBtn.style.display = 'none';
    mainCounterEl.style.display = 'none';
    // mostrar mensaje breve y luego la mini-pestaña para cerrar y reproducir video
    setTimeout(()=>{
      miniWrap.style.display = 'block';
    },800);
  }

  // ---------- Mostrar overlay con video (iframe)
  function showFinalVideo(videoId){
    // Construir iframe — autoplay=1 & mute=1 para que la mayoría de navegadores permitan reproducción automática.
    const iframe = document.createElement('iframe');
    iframe.width = '100%';
    iframe.height = '100%';
    iframe.allow = 'autoplay; encrypted-media; fullscreen';
    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&rel=0`;
    iframe.style.border = '0';
    // Limpiamos y añadimos
    videoBox.innerHTML = '';
    videoBox.appendChild(iframe);
    videoOverlay.style.display = 'flex';
    // permitir cerrar el video overlay si el usuario toca fuera o presiona ESC
    videoOverlay.addEventListener('click', (e)=>{
      if(e.target === videoOverlay){
        videoOverlay.style.display = 'none';
        videoBox.innerHTML = '';
      }
    });
    window.addEventListener('keydown', function escClose(e){
      if(e.key === 'Escape'){
        videoOverlay.style.display = 'none';
        videoBox.innerHTML = '';
        window.removeEventListener('keydown', escClose);
      }
    });
  }

  // accesibilidad: cerrar modal con ESC también
  window.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && overlay.style.display === 'flex'){
      overlay.style.display = 'none';
    }
  });
</script>
</body>
</html>
